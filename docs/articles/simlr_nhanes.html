<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>simlr: nhanes application explained • simlr.nhanes</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="simlr: nhanes application explained"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">simlr.nhanes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/pca_cca_simlr.html">PCA, CCA and SiMLR: simple examples from simulated data</a></li>
    <li><a class="dropdown-item" href="../articles/simlr_nhanes.html">simlr: nhanes application explained</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/stnava/simlr_nhanes/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>simlr: nhanes application explained</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/stnava/simlr_nhanes/blob/HEAD/vignettes/simlr_nhanes.Rmd"><code>vignettes/simlr_nhanes.Rmd</code></a></small>
      <div class="d-none name"><code>simlr_nhanes.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(ellipse)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;ellipse&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     pairs</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">library</span>(ANTsR)</span></code></pre></div>
<pre><code>## Warning: replacing previous import &#39;stats::filter&#39; by &#39;dplyr::filter&#39; when
## loading &#39;ANTsR&#39;</code></pre>
<pre><code>## ANTsR 0.6.1
## Environment variables set either in .Renviron or with a seed (e.g. XXX): 
## Sys.setenv(ANTS_RANDOM_SEED = XXX)
## Sys.setenv(ITK_GLOBAL_DEFAULT_NUMBER_OF_THREADS = 1)
## may influence reproducibility in some methods. See
## https://github.com/ANTsX/ANTs/wiki/antsRegistration-reproducibility-issues
## for more information.Also see *repro methods in antsRegistration.</code></pre>
<pre><code>## 
## Attaching package: &#39;ANTsR&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     sd, var</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     all, any, apply, max, min, prod, range, sum</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">library</span>(subtyper)</span></code></pre></div>
<pre><code>## Warning: replacing previous import &#39;ciTools::add_ci&#39; by &#39;gtsummary::add_ci&#39;
## when loading &#39;subtyper&#39;</code></pre>
<pre><code>## Warning: replacing previous import &#39;dplyr::as_data_frame&#39; by
## &#39;igraph::as_data_frame&#39; when loading &#39;subtyper&#39;</code></pre>
<pre><code>## Warning: replacing previous import &#39;dplyr::groups&#39; by &#39;igraph::groups&#39; when
## loading &#39;subtyper&#39;</code></pre>
<pre><code>## Warning: replacing previous import &#39;dplyr::union&#39; by &#39;igraph::union&#39; when
## loading &#39;subtyper&#39;</code></pre>
<pre><code>## Warning: replacing previous import &#39;gtsummary::add_ci&#39; by &#39;ciTools::add_ci&#39;
## when loading &#39;subtyper&#39;</code></pre>
<pre><code>## Registered S3 methods overwritten by &#39;fmsb&#39;:
##   method    from
##   print.roc pROC
##   plot.roc  pROC</code></pre>
<pre><code>## Warning: replacing previous import &#39;gt::gt&#39; by &#39;globaltest::gt&#39; when loading
## &#39;subtyper&#39;</code></pre>
<pre><code>## Warning: replacing previous import &#39;dplyr::rename&#39; by &#39;plyr::rename&#39; when
## loading &#39;subtyper&#39;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">library</span>( nhanesA )</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="fu">library</span>( simlr.nhanes )</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="fu">library</span>( dplyr )</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:Biobase&#39;:
## 
##     combine</code></pre>
<pre><code>## The following objects are masked from &#39;package:BiocGenerics&#39;:
## 
##     combine, intersect, setdiff, union</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;nhanescog_2011_2014&quot;</span>)</span></code></pre></div>
<div id="nhanes-example" class="section level2">
<h2>NHANES example</h2>
<p>The five publicly available data categories are: - Demographics
(DEMO) - Dietary (DIET) - Examination (EXAM) - Laboratory (LAB) -
Questionnaire (Q). The abbreviated forms in parentheses may be
substituted for the long form in nhanesA commands.</p>
<p>INDFMPIR: Poverty Income Ratio (0 = no income, higher values = higher
income relative to poverty threshold). • INDHHIN2: Annual Household
Income (categorized ranges). • DMDEDUC2: Education Level (for adults 20+
years). • OCD390G: Employment Status (in occupation questionnaire).</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># Demographic data (e.g., 2011-2012 cycle)</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>demo_data <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;DEMO_G&#39;</span>)</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>cog_data <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;CFQ_G&#39;</span>)</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>depression_data <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;DPQ_G&#39;</span>)</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a>sleep_data <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;SLQ_G&#39;</span>)</span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>bp <span class="ot">=</span> <span class="fu">nhanes</span>( <span class="st">&quot;BPX_G&quot;</span>)</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>bm <span class="ot">=</span> <span class="fu">nhanes</span>( <span class="st">&quot;BMX_G&quot;</span>)</span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a>env_data <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;PBCD_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a><span class="co"># Demographic data (e.g., 2013-2014 cycle)</span></span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a>demo_data13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;DEMO_H&#39;</span>)</span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a>cog_data13<span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;CFQ_H&#39;</span>)</span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a>depression_data13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;DPQ_H&#39;</span>)</span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a>sleep_data13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;SLQ_H&#39;</span>)</span>
<span id="cb26-15"><a href="#cb26-15" tabindex="-1"></a>bp13 <span class="ot">=</span> <span class="fu">nhanes</span>( <span class="st">&quot;BPX_H&quot;</span>)</span>
<span id="cb26-16"><a href="#cb26-16" tabindex="-1"></a>bm13 <span class="ot">=</span> <span class="fu">nhanes</span>( <span class="st">&quot;BMX_H&quot;</span>)</span>
<span id="cb26-17"><a href="#cb26-17" tabindex="-1"></a>env_data13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;PBCD_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-18"><a href="#cb26-18" tabindex="-1"></a></span>
<span id="cb26-19"><a href="#cb26-19" tabindex="-1"></a></span>
<span id="cb26-20"><a href="#cb26-20" tabindex="-1"></a>phdata <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;PHTHTE_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-21"><a href="#cb26-21" tabindex="-1"></a>phdata13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;PHTHTE_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-22"><a href="#cb26-22" tabindex="-1"></a><span class="co"># pfasd &lt;- nhanes(&#39;SSPFAS_G&#39;)  # Example for phthalates and blood metals</span></span>
<span id="cb26-23"><a href="#cb26-23" tabindex="-1"></a><span class="co"># pfasd13 &lt;- nhanes(&#39;SSPFAS_H&#39;)  # Example for phthalates and blood metals</span></span>
<span id="cb26-24"><a href="#cb26-24" tabindex="-1"></a>vocd <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;VOCWB_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-25"><a href="#cb26-25" tabindex="-1"></a>vocd13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;VOCWB_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-26"><a href="#cb26-26" tabindex="-1"></a>hvmt <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;UAS_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-27"><a href="#cb26-27" tabindex="-1"></a>hvmt13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;UAS_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-28"><a href="#cb26-28" tabindex="-1"></a>pst <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;PSTPOL_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-29"><a href="#cb26-29" tabindex="-1"></a>pst13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;PSTPOL_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-30"><a href="#cb26-30" tabindex="-1"></a>pfc <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;PFC_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb26-31"><a href="#cb26-31" tabindex="-1"></a>pfc13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;PFC_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span></code></pre></div>
<pre><code>## simpleWarning in download.file(url, tf, mode = &quot;wb&quot;, quiet = TRUE): downloaded length 0 != reported length 1245</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>mm <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;UHM_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>mm13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;UHM_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span></code></pre></div>
<pre><code>## simpleWarning in download.file(url, tf, mode = &quot;wb&quot;, quiet = TRUE): downloaded length 0 != reported length 1245</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>cu <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;CUSEZN_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>cu13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;CUSEZN_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>ig <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;IHgEM_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>ig13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;IHgEM_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>uh <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;UHG_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>uh13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;UHG_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a>di <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;DR1TOT_G&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a>di13 <span class="ot">&lt;-</span> <span class="fu">nhanes</span>(<span class="st">&#39;DR1TOT_H&#39;</span>)  <span class="co"># Example for phthalates and blood metals</span></span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" tabindex="-1"></a></span>
<span id="cb30-12"><a href="#cb30-12" tabindex="-1"></a>merge_nhanes_data <span class="ot">&lt;-</span> <span class="cf">function</span>( joinid, nacol,  ...) {</span>
<span id="cb30-13"><a href="#cb30-13" tabindex="-1"></a>  datasets <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb30-14"><a href="#cb30-14" tabindex="-1"></a>  dfout <span class="ot">&lt;-</span> <span class="fu">Reduce</span>(<span class="cf">function</span>(x, y) {</span>
<span id="cb30-15"><a href="#cb30-15" tabindex="-1"></a>    <span class="fu">left_join</span>(x, y, <span class="at">by =</span> joinid)  <span class="co"># Adjust &quot;ID&quot; to your common column name</span></span>
<span id="cb30-16"><a href="#cb30-16" tabindex="-1"></a>  }, datasets)</span>
<span id="cb30-17"><a href="#cb30-17" tabindex="-1"></a>  dfout <span class="ot">=</span> dfout[ <span class="sc">!</span><span class="fu">is.na</span>( dfout[,nacol] ), ]</span>
<span id="cb30-18"><a href="#cb30-18" tabindex="-1"></a>  <span class="fu">return</span>( dfout )</span>
<span id="cb30-19"><a href="#cb30-19" tabindex="-1"></a>}</span>
<span id="cb30-20"><a href="#cb30-20" tabindex="-1"></a></span>
<span id="cb30-21"><a href="#cb30-21" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> <span class="fu">merge_nhanes_data</span>( <span class="st">&#39;SEQN&#39;</span>, <span class="st">&#39;CFDDS&#39;</span>,</span>
<span id="cb30-22"><a href="#cb30-22" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(cog_data, cog_data13),</span>
<span id="cb30-23"><a href="#cb30-23" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(demo_data,demo_data13),</span>
<span id="cb30-24"><a href="#cb30-24" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(di,di13),</span>
<span id="cb30-25"><a href="#cb30-25" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(depression_data,depression_data13),</span>
<span id="cb30-26"><a href="#cb30-26" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(sleep_data,sleep_data13),</span>
<span id="cb30-27"><a href="#cb30-27" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(bp,bp13),</span>
<span id="cb30-28"><a href="#cb30-28" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(bm,bm13),</span>
<span id="cb30-29"><a href="#cb30-29" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(env_data, env_data13),</span>
<span id="cb30-30"><a href="#cb30-30" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(phdata, phdata13),</span>
<span id="cb30-31"><a href="#cb30-31" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(vocd, vocd13),</span>
<span id="cb30-32"><a href="#cb30-32" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(cu, cu13),</span>
<span id="cb30-33"><a href="#cb30-33" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(ig, ig13),</span>
<span id="cb30-34"><a href="#cb30-34" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(uh, uh13),</span>
<span id="cb30-35"><a href="#cb30-35" tabindex="-1"></a>  mm,</span>
<span id="cb30-36"><a href="#cb30-36" tabindex="-1"></a><span class="co">#  merge_same_type_columns(pst, pst13) )</span></span>
<span id="cb30-37"><a href="#cb30-37" tabindex="-1"></a><span class="co">#  merge_same_type_columns(pfc, pfc13) ,</span></span>
<span id="cb30-38"><a href="#cb30-38" tabindex="-1"></a>  <span class="fu">merge_same_type_columns</span>(hvmt, hvmt13))</span>
<span id="cb30-39"><a href="#cb30-39" tabindex="-1"></a></span>
<span id="cb30-40"><a href="#cb30-40" tabindex="-1"></a><span class="fu">table</span>(merged_data<span class="sc">$</span>RIAGENDR)</span></code></pre></div>
<pre><code>## 
##   Male Female 
##   1469   1545</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>nhanescog<span class="sc">$</span>SEQN <span class="ot">=</span> nhanescog<span class="sc">$</span>seqn</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>merged_data<span class="ot">=</span><span class="fu">merge</span>(nhanescog, merged_data, <span class="at">by=</span><span class="st">&#39;SEQN&#39;</span>)</span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a>depnames <span class="ot">=</span> <span class="fu">c</span>( </span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>  <span class="fu">getNamesFromDataframe</span>( <span class="st">&quot;SLQ&quot;</span>, merged_data ),</span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a><span class="co">#  getNamesFromDataframe( &quot;DPQ&quot;, merged_data, exclusions=&#39;DPQ100&#39; )</span></span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a>  <span class="fu">getNamesFromDataframe</span>( <span class="st">&quot;DPQ&quot;</span>, merged_data )</span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a>)</span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a><span class="cf">for</span> ( x <span class="cf">in</span> depnames ) merged_data[,x]<span class="ot">=</span><span class="fu">map_freq_to_numeric</span>(merged_data,x) </span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" tabindex="-1"></a><span class="co"># deek</span></span>
<span id="cb32-13"><a href="#cb32-13" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" tabindex="-1"></a>idata <span class="ot">=</span> <span class="fu">impute_data</span>(merged_data)</span>
<span id="cb32-16"><a href="#cb32-16" tabindex="-1"></a>idata <span class="ot">=</span> idata[ idata<span class="sc">$</span>BPXDI1 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">&amp;</span> idata<span class="sc">$</span>BPXDI2 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">&amp;</span> idata<span class="sc">$</span>BPXDI3 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">&amp;</span> idata<span class="sc">$</span>BPXDI4 <span class="sc">&gt;</span> <span class="dv">20</span>,  ]</span>
<span id="cb32-17"><a href="#cb32-17" tabindex="-1"></a>fdata <span class="ot">&lt;-</span> <span class="fu">filter_na_columns</span>(merged_data, <span class="at">max_na_percent =</span> <span class="fl">0.5</span>)  <span class="co"># Removes columns with &gt;10% NAs</span></span>
<span id="cb32-18"><a href="#cb32-18" tabindex="-1"></a>fdata <span class="ot">=</span> fdata[ <span class="fu">na2f</span>(fdata<span class="sc">$</span>BPXDI1 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">&amp;</span> fdata<span class="sc">$</span>BPXDI2 <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">&amp;</span> fdata<span class="sc">$</span>BPXDI3 <span class="sc">&gt;</span> <span class="dv">20</span> ),  ]</span>
<span id="cb32-19"><a href="#cb32-19" tabindex="-1"></a>fdata<span class="sc">$</span>race <span class="ot">=</span> <span class="fu">factor</span>( fdata<span class="sc">$</span>race )</span>
<span id="cb32-20"><a href="#cb32-20" tabindex="-1"></a>fdata<span class="sc">$</span>riagendr <span class="ot">=</span> <span class="fu">factor</span>( fdata<span class="sc">$</span>riagendr )</span>
<span id="cb32-21"><a href="#cb32-21" tabindex="-1"></a></span>
<span id="cb32-22"><a href="#cb32-22" tabindex="-1"></a>myformR <span class="ot">=</span>  <span class="fu">create_formula</span>( fdata, <span class="st">&#39;z_digit_re&#39;</span>, <span class="fu">c</span>(<span class="st">&#39;SEQN&#39;</span>, <span class="st">&#39;RIDAGEMN&#39;</span>,<span class="st">&#39;RIDRETH3&#39;</span>, <span class="st">&#39;CFASTAT&#39;</span>, <span class="st">&#39;CFDCRNC&#39;</span>, <span class="st">&#39;CFDCIT&#39;</span>, <span class="st">&#39;CFDCST&#39;</span>, <span class="st">&#39;CFDAPP&#39;</span>, <span class="st">&#39;CFDAST&#39;</span>, <span class="st">&#39;CFALANG&#39;</span>, <span class="st">&#39;BPAARM&#39;</span>, <span class="st">&#39;CFDCCS&#39;</span>, <span class="st">&#39;CFDCST&#39;</span>, <span class="st">&#39;CFDCIT&#39;</span>, <span class="st">&#39;CFDCSR&#39;</span>, <span class="st">&#39;CFDCIR&#39;</span>, <span class="st">&#39;CFDCST&#39;</span>, <span class="st">&#39;CFDCIT&#39;</span>, <span class="st">&#39;CFDARNC&#39;</span>, <span class="st">&#39;CFDDS&#39;</span>,</span>
<span id="cb32-23"><a href="#cb32-23" tabindex="-1"></a><span class="st">&#39;INDHHIN2&#39;</span>,<span class="st">&#39;DMDHRBR4&#39;</span>,<span class="st">&#39;INDFMIN2&#39;</span>,<span class="st">&#39;PEASCST1&#39;</span>,<span class="st">&#39;PEASCCT1&#39;</span>,<span class="st">&#39;PEASCTM1&#39;</span>,<span class="st">&#39;BPACSZ&#39;</span>,<span class="st">&#39;BPXML1&#39;</span>,<span class="st">&#39;URXMBP&#39;</span>,<span class="st">&#39;URXMC1&#39;</span>,<span class="st">&#39;URDUMMAL&#39;</span>,<span class="st">&#39;SLD010H&#39;</span>,<span class="st">&#39;LBXBMN&#39;</span>,<span class="st">&#39;URXCNP&#39;</span>,<span class="st">&#39;URXECP&#39;</span>,<span class="st">&#39;URXMHH&#39;</span>,<span class="st">&#39;URXMHP&#39;</span>,<span class="st">&#39;URXMHNC&#39;</span>,<span class="st">&#39;LBXV06&#39;</span>,<span class="st">&#39;LBXV2A&#39;</span>,<span class="st">&#39;LBXV3B&#39;</span>,<span class="st">&#39;LBXV4C&#39;</span>,<span class="st">&#39;LBXVCB&#39;</span>,<span class="st">&#39;LBXVEB&#39;</span>,<span class="st">&#39;LBXVCB&#39;</span>,<span class="st">&#39;LBXVIPB&#39;</span>,<span class="st">&#39;LBXVMC&#39;</span>,<span class="st">&#39;LBXVOX&#39;</span>,<span class="st">&#39;LBXVTC&#39;</span>,<span class="st">&#39;LBXVTE&#39;</span>,<span class="st">&#39;LBXVXY&#39;</span>,<span class="st">&#39;URXUAS5&#39;</span>,<span class="st">&#39;URXUAB&#39;</span>,<span class="st">&#39;URXUAC&#39;</span>,<span class="st">&#39;URXUMMA&#39;</span>,<span class="st">&#39;URXUAS3&#39;</span>,<span class="st">&#39;LBXBSE&#39;</span>, <span class="st">&#39;RIAGENDR&#39;</span>, <span class="st">&#39;RIDAGEYR&#39;</span>, <span class="st">&#39;RIDRETH1&#39;</span>, <span class="st">&#39;seqn&#39;</span>,</span>
<span id="cb32-24"><a href="#cb32-24" tabindex="-1"></a><span class="st">&#39;age_cat&#39;</span>,<span class="st">&#39;ridreth1&#39;</span>,<span class="st">&#39;ridreth3&#39;</span>,<span class="st">&#39;edu_cat&#39;</span>,<span class="st">&#39;cfastat&#39;</span>,<span class="st">&#39;year&#39;</span>,<span class="st">&#39;female&#39;</span>,<span class="st">&#39;cerad_sum&#39;</span>,</span>
<span id="cb32-25"><a href="#cb32-25" tabindex="-1"></a><span class="co"># &#39;wtint2yr&#39;,&#39;wtmec2yr&#39;,</span></span>
<span id="cb32-26"><a href="#cb32-26" tabindex="-1"></a><span class="st">&#39;BMXARML&#39;</span>,<span class="st">&#39;BMXARMC&#39;</span>,<span class="st">&#39;BMXHT&#39;</span>,<span class="st">&#39;BMXLEG&#39;</span>,<span class="st">&#39;BMXWAIST&#39;</span>,</span>
<span id="cb32-27"><a href="#cb32-27" tabindex="-1"></a><span class="st">&#39;INDFMPIR&#39;</span>, <span class="st">&#39;DRABF&#39;</span>,</span>
<span id="cb32-28"><a href="#cb32-28" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;DRQS&#39;</span>,fdata),</span>
<span id="cb32-29"><a href="#cb32-29" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;DPD&#39;</span>,fdata),</span>
<span id="cb32-30"><a href="#cb32-30" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;cfd&#39;</span>,fdata),</span>
<span id="cb32-31"><a href="#cb32-31" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;z_&#39;</span>,fdata),</span>
<span id="cb32-32"><a href="#cb32-32" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;low_&#39;</span>,fdata),</span>
<span id="cb32-33"><a href="#cb32-33" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;sdm&#39;</span>,fdata),</span>
<span id="cb32-34"><a href="#cb32-34" tabindex="-1"></a><span class="co"># getNamesFromDataframe( &#39;DPQ&#39;,depression_data, exclusions=c(&#39;DPQ080&#39;,&#39;DPQ030&#39;&#39;DPQ080&#39;,)),</span></span>
<span id="cb32-35"><a href="#cb32-35" tabindex="-1"></a><span class="co"># getNamesFromDataframe( &#39;DPQ&#39;,depression_data, exclusions=c(&#39;DPQ100&#39;)),</span></span>
<span id="cb32-36"><a href="#cb32-36" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;URXUCR&#39;</span>,fdata ),</span>
<span id="cb32-37"><a href="#cb32-37" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;BMXSAD&#39;</span>,fdata ),</span>
<span id="cb32-38"><a href="#cb32-38" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;BPAEN&#39;</span>,fdata ),</span>
<span id="cb32-39"><a href="#cb32-39" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;BPXP&#39;</span>,fdata ),</span>
<span id="cb32-40"><a href="#cb32-40" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;DMD&#39;</span>,fdata ),</span>
<span id="cb32-41"><a href="#cb32-41" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;DMDHHSZ&#39;</span>,fdata ),</span>
<span id="cb32-42"><a href="#cb32-42" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;DRD&#39;</span>,fdata ),</span>
<span id="cb32-43"><a href="#cb32-43" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;DBD&#39;</span>,fdata ),</span>
<span id="cb32-44"><a href="#cb32-44" tabindex="-1"></a><span class="co">#getNamesFromDataframe( &#39;DR1&#39;,fdata ),</span></span>
<span id="cb32-45"><a href="#cb32-45" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;WT&#39;</span>,fdata ),</span>
<span id="cb32-46"><a href="#cb32-46" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;SDM&#39;</span>,fdata ),</span>
<span id="cb32-47"><a href="#cb32-47" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;DMQ&#39;</span>,fdata ),</span>
<span id="cb32-48"><a href="#cb32-48" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;FIA&#39;</span>,fdata ),</span>
<span id="cb32-49"><a href="#cb32-49" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;MIA&#39;</span>,fdata ),</span>
<span id="cb32-50"><a href="#cb32-50" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;AIA&#39;</span>,fdata ),</span>
<span id="cb32-51"><a href="#cb32-51" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;DMDCIT&#39;</span>,fdata ),</span>
<span id="cb32-52"><a href="#cb32-52" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;DMDYRS&#39;</span>,fdata ),</span>
<span id="cb32-53"><a href="#cb32-53" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;RIDE&#39;</span>,fdata ),</span>
<span id="cb32-54"><a href="#cb32-54" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;CFDCST&#39;</span>,fdata ),</span>
<span id="cb32-55"><a href="#cb32-55" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;SDDSRVY&#39;</span>, fdata ),</span>
<span id="cb32-56"><a href="#cb32-56" tabindex="-1"></a><span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;CFDCIT&#39;</span>,fdata ), <span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;LC&#39;</span>,fdata ), <span class="fu">getNamesFromDataframe</span>( <span class="st">&#39;SI&#39;</span>,fdata ) ) )</span>
<span id="cb32-57"><a href="#cb32-57" tabindex="-1"></a>problematic_factors <span class="ot">&lt;-</span> <span class="fu">check_formula_factors</span>(myformR, df)</span>
<span id="cb32-58"><a href="#cb32-58" tabindex="-1"></a><span class="fu">print</span>(problematic_factors)</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>idata2<span class="ot">=</span><span class="fu">impute_data</span>(fdata )</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="co"># mdl = lm( myformR, data=idata2)</span></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="co"># summary( mdl )</span></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="co"># mdl0 = lm( myformR, data=fdata)</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="co"># summary( mdl0 )</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="do">##############</span></span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a><span class="do">####</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>colcats<span class="ot">=</span><span class="fu">rep</span>(<span class="st">&quot;Basic&quot;</span>,<span class="fu">ncol</span>(fdata))</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>colcats[ <span class="fu">colnames</span>(fdata) <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">&quot;ridageyr&quot;</span>,<span class="st">&quot;riagendr&quot;</span>,<span class="st">&quot;race&quot;</span>,<span class="st">&quot;dmdeduc2&quot;</span>,<span class="st">&quot;INDFMPIR&quot;</span>) ]<span class="ot">=</span><span class="st">&#39;demog&#39;</span></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>bpname<span class="ot">=</span><span class="fu">getNamesFromDataframe</span>( <span class="st">&quot;BPX&quot;</span>,fdata)</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>bmname<span class="ot">=</span><span class="fu">getNamesFromDataframe</span>( <span class="st">&quot;BMX&quot;</span>,fdata)</span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>colcats[ <span class="fu">colnames</span>(fdata) <span class="sc">%in%</span>  <span class="fu">c</span>(bmname,bpname,<span class="st">&quot;Testosterone&quot;</span>,<span class="st">&quot;TotChol&quot;</span>,<span class="st">&quot;Diabetes&quot;</span> ) ]<span class="ot">=</span><span class="st">&#39;physical&#39;</span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>colcats[ <span class="fu">colnames</span>(fdata) <span class="sc">%in%</span>   <span class="fu">c</span>(</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a>  <span class="fu">getNamesFromDataframe</span>( <span class="st">&quot;DPQ&quot;</span>, fdata ), </span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a>  <span class="fu">getNamesFromDataframe</span>( <span class="st">&quot;SLQ&quot;</span>, fdata ) )  ]<span class="ot">=</span><span class="st">&#39;mentalhealth&#39;</span></span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a>colcats[ <span class="fu">colnames</span>(fdata) <span class="sc">%in%</span>  <span class="fu">getNamesFromDataframe</span>( <span class="st">&quot;LBX&quot;</span>, fdata ) ]<span class="ot">=</span><span class="st">&#39;exposures&#39;</span></span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a>colcats[ <span class="fu">colnames</span>(fdata) <span class="sc">%in%</span>  <span class="fu">getNamesFromDataframe</span>( <span class="st">&quot;DR1T&quot;</span>, fdata ) ]<span class="ot">=</span><span class="st">&#39;diet&#39;</span></span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a><span class="co"># colcats[ colnames(fdata) %in%  getNamesFromDataframe( &quot;cfd&quot;, fdata )[-1] ]=&#39;digitspan&#39;</span></span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a>tbl<span class="ot">=</span><span class="fu">table</span>(colcats)</span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a><span class="do">##############</span></span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a>nh_list<span class="ot">=</span><span class="fu">list</span>()</span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a>knm<span class="ot">=</span><span class="fu">names</span>(tbl)[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb35-16"><a href="#cb35-16" tabindex="-1"></a>mycc <span class="ot">=</span> <span class="fu">complete.cases</span>( fdata[ , colcats <span class="sc">%in%</span> knm ])</span>
<span id="cb35-17"><a href="#cb35-17" tabindex="-1"></a><span class="cf">for</span> ( k <span class="cf">in</span> knm ) {</span>
<span id="cb35-18"><a href="#cb35-18" tabindex="-1"></a>    <span class="fu">print</span>(k)</span>
<span id="cb35-19"><a href="#cb35-19" tabindex="-1"></a>    temp0<span class="ot">=</span>(fdata[mycc,colcats<span class="sc">==</span>k])</span>
<span id="cb35-20"><a href="#cb35-20" tabindex="-1"></a>    temp <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="fu">convert_to_numeric_matrix</span>( temp0 ))</span>
<span id="cb35-21"><a href="#cb35-21" tabindex="-1"></a>    <span class="cf">for</span> ( j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(temp) ) {</span>
<span id="cb35-22"><a href="#cb35-22" tabindex="-1"></a>        <span class="fu">hist</span>( temp[,j], <span class="at">main=</span><span class="fu">colnames</span>(temp)[j])</span>
<span id="cb35-23"><a href="#cb35-23" tabindex="-1"></a><span class="co">#        Sys.sleep(1)</span></span>
<span id="cb35-24"><a href="#cb35-24" tabindex="-1"></a>        }</span>
<span id="cb35-25"><a href="#cb35-25" tabindex="-1"></a>    nh_list[[<span class="fu">length</span>(nh_list)<span class="sc">+</span><span class="dv">1</span>]]<span class="ot">=</span><span class="fu">data.matrix</span>( ( temp ) )</span>
<span id="cb35-26"><a href="#cb35-26" tabindex="-1"></a><span class="co">#    nh_list[[length(nh_list)]]=impute_and_report_na(nh_list[[length(nh_list)]] )</span></span>
<span id="cb35-27"><a href="#cb35-27" tabindex="-1"></a>    }</span></code></pre></div>
<pre><code>## [1] &quot;demog&quot;</code></pre>
<p><img src="simlr_nhanes_files/figure-html/simlrcats-1.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-2.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-3.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-4.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-5.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-6.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-7.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-8.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-9.png" width="700" /></p>
<pre><code>## [1] &quot;diet&quot;</code></pre>
<p><img src="simlr_nhanes_files/figure-html/simlrcats-10.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-11.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-12.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-13.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-14.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-15.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-16.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-17.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-18.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-19.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-20.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-21.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-22.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-23.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-24.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-25.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-26.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-27.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-28.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-29.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-30.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-31.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-32.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-33.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-34.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-35.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-36.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-37.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-38.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-39.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-40.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-41.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-42.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-43.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-44.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-45.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-46.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-47.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-48.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-49.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-50.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-51.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-52.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-53.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-54.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-55.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-56.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-57.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-58.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-59.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-60.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-61.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-62.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-63.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-64.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-65.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-66.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-67.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-68.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-69.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-70.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-71.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-72.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-73.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-74.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-75.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-76.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-77.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-78.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-79.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-80.png" width="700" /></p>
<pre><code>## [1] &quot;exposures&quot;</code></pre>
<p><img src="simlr_nhanes_files/figure-html/simlrcats-81.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-82.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-83.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-84.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-85.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-86.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-87.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-88.png" width="700" /></p>
<pre><code>## [1] &quot;mentalhealth&quot;</code></pre>
<p><img src="simlr_nhanes_files/figure-html/simlrcats-89.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-90.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-91.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-92.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-93.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-94.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-95.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-96.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-97.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-98.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-99.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-100.png" width="700" /></p>
<pre><code>## [1] &quot;physical&quot;</code></pre>
<p><img src="simlr_nhanes_files/figure-html/simlrcats-101.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-102.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-103.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-104.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-105.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-106.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-107.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-108.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-109.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-110.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-111.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-112.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-113.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-114.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-115.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-116.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-117.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-118.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-119.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-120.png" width="700" /><img src="simlr_nhanes_files/figure-html/simlrcats-121.png" width="700" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="fu">names</span>(nh_list)<span class="ot">=</span>knm</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="do">#####</span></span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="do">################################################################################</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>regs <span class="ot">&lt;-</span> <span class="fu">regularizeSimlr</span>(nh_list,<span class="at">fraction=</span><span class="fl">0.15</span>,<span class="at">sigma=</span><span class="fu">rep</span>(<span class="fl">1.0</span>,<span class="fu">length</span>(nh_list)))</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a><span class="co"># regs &lt;- regularizeSimlr(nh_list)</span></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>wdemog<span class="ot">=</span><span class="fu">which</span>( knm <span class="sc">==</span> <span class="st">&#39;demog&#39;</span>)</span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a><span class="cf">for</span> ( wdemog <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(nh_list) ) regs[[ wdemog]]<span class="ot">=</span><span class="fu">diag</span>( <span class="fu">ncol</span>(nh_list[[wdemog]]))</span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a>initu<span class="ot">=</span><span class="fu">initializeSimlr</span>( nh_list, <span class="at">k=</span><span class="fu">min_columns_list</span>(nh_list), <span class="at">jointReduction=</span><span class="cn">TRUE</span> )</span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a>initu<span class="ot">=</span><span class="fu">initializeSimlr</span>( nh_list, <span class="at">k=</span><span class="fu">round</span>(<span class="fu">max_columns_list</span>(nh_list)<span class="sc">*</span><span class="fl">0.5</span>), <span class="at">jointReduction=</span><span class="cn">TRUE</span> )</span>
<span id="cb42-8"><a href="#cb42-8" tabindex="-1"></a>resultNH <span class="ot">&lt;-</span> <span class="fu">simlr</span>( nh_list, </span>
<span id="cb42-9"><a href="#cb42-9" tabindex="-1"></a>        <span class="at">iterations=</span><span class="dv">300</span>,</span>
<span id="cb42-10"><a href="#cb42-10" tabindex="-1"></a>        <span class="at">sparsenessQuantiles=</span><span class="fu">rep</span>(<span class="fl">0.8</span>,<span class="fu">length</span>(nh_list)),</span>
<span id="cb42-11"><a href="#cb42-11" tabindex="-1"></a>        <span class="at">positivities=</span><span class="fu">rep</span>(<span class="st">&quot;positive&quot;</span>,<span class="fu">length</span>(nh_list)), </span>
<span id="cb42-12"><a href="#cb42-12" tabindex="-1"></a>        <span class="at">energyType=</span><span class="st">&#39;regression&#39;</span>, <span class="at">mixAlg=</span><span class="st">&#39;ica&#39;</span>,</span>
<span id="cb42-13"><a href="#cb42-13" tabindex="-1"></a>        <span class="at">scale=</span><span class="fu">c</span>(<span class="st">&quot;centerAndScale&quot;</span>, <span class="st">&quot;np&quot;</span>),</span>
<span id="cb42-14"><a href="#cb42-14" tabindex="-1"></a>        <span class="at">constraint=</span><span class="st">&quot;Grassmann10x10&quot;</span>,</span>
<span id="cb42-15"><a href="#cb42-15" tabindex="-1"></a>        <span class="at">initialUMatrix=</span>initu, <span class="at">verbose=</span>T )</span></code></pre></div>
<pre><code>## [1] &quot;Grassmann10&quot; &quot;10&quot;          NA           
## [1] &quot;     &lt;0&gt; BUILD-V &lt;0&gt; BUILD-V &lt;0&gt; BUILD-V &lt;0&gt; BUILD-V &lt;0&gt;    &quot;
## [1] &quot;initialDataTerm: 0.31446549765156  &lt;o&gt; mixer: ica  &lt;o&gt; E:  regression&quot;
## [1] &quot;Iteration: 1 bestEv: 0.0695937504716772 bestIt: 1 CE: 0.0695937504716772 featOrth: 0.107301298258429&quot;
## [1] &quot;Iteration: 2 bestEv: 0.00890277677425927 bestIt: 2 CE: 0.00890277677425927 featOrth: 0.114254924274318&quot;
## [1] &quot;Iteration: 3 bestEv: 0.00890277677425927 bestIt: 2 CE: 0.00904130814835519 featOrth: 0.131352709479473&quot;
## [1] &quot;Iteration: 4 bestEv: 0.00890277677425927 bestIt: 2 CE: 0.00896384320398113 featOrth: 0.203782071132684&quot;
## [1] &quot;Iteration: 5 bestEv: 0.00890277677425927 bestIt: 2 CE: 0.00902061911252372 featOrth: 0.123142582834143&quot;
## [1] &quot;Iteration: 6 bestEv: 0.00890277677425927 bestIt: 2 CE: 0.00900047493612458 featOrth: 0.118898405684288&quot;
## [1] &quot;Iteration: 7 bestEv: 0.00890277677425927 bestIt: 2 CE: 0.0090131387774901 featOrth: 0.163018847259873&quot;
## [1] &quot;Iteration: 8 bestEv: 0.00890277677425927 bestIt: 2 CE: 0.00901685196476987 featOrth: 0.127286964437392&quot;</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="do">#####################################################</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a>projlist<span class="ot">=</span><span class="fu">list</span>()</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a>mysimk<span class="ot">=</span><span class="dv">2</span></span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="cf">for</span> ( k <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(nh_list)) {</span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a>    <span class="fu">rownames</span>(resultNH<span class="sc">$</span>v[[k]])<span class="ot">=</span><span class="fu">colnames</span>( nh_list[[k]])</span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a>    ux<span class="ot">=</span><span class="fu">data.frame</span>(nh_list[[k]] <span class="sc">%*%</span> <span class="fu">abs</span>(resultNH<span class="sc">$</span>v[[k]][,<span class="dv">1</span><span class="sc">:</span>mysimk]))</span>
<span id="cb44-7"><a href="#cb44-7" tabindex="-1"></a>    <span class="fu">colnames</span>(ux)<span class="ot">=</span><span class="fu">paste0</span>(<span class="fu">names</span>(nh_list)[k],<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(ux))</span>
<span id="cb44-8"><a href="#cb44-8" tabindex="-1"></a>    projlist[[<span class="fu">length</span>(projlist)<span class="sc">+</span><span class="dv">1</span>]]<span class="ot">=</span>ux</span>
<span id="cb44-9"><a href="#cb44-9" tabindex="-1"></a>}</span>
<span id="cb44-10"><a href="#cb44-10" tabindex="-1"></a>simdf<span class="ot">=</span>simdf2<span class="ot">=</span>dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(projlist)</span>
<span id="cb44-11"><a href="#cb44-11" tabindex="-1"></a>cognames<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;cerad_sum&quot;</span>,<span class="st">&quot;cfdast&quot;</span>,<span class="st">&quot;cfdds&quot;</span>)</span>
<span id="cb44-12"><a href="#cb44-12" tabindex="-1"></a>cognames <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb44-13"><a href="#cb44-13" tabindex="-1"></a>  <span class="st">&quot;z_cerad_re&quot;</span>, <span class="st">&quot;z_animal_re&quot;</span>,      <span class="st">&quot;z_delayed_re&quot;</span>,    <span class="st">&quot;z_global_re&quot;</span>,     <span class="st">&quot;z_digit_re&quot;</span></span>
<span id="cb44-14"><a href="#cb44-14" tabindex="-1"></a><span class="co">#  &quot;z_cerad_age&quot;, &quot;z_animal_age&quot;,     &quot;z_digit_age&quot;,      &quot;z_delayed_age&quot;,    &quot;z_global_age&quot;,</span></span>
<span id="cb44-15"><a href="#cb44-15" tabindex="-1"></a><span class="co">#  &quot;z_cerad_edu&quot;, &quot;z_animal_edu&quot;,     &quot;z_digit_edu&quot;,      &quot;z_delayed_edu&quot;,    &quot;z_global_edu&quot;</span></span>
<span id="cb44-16"><a href="#cb44-16" tabindex="-1"></a>)</span>
<span id="cb44-17"><a href="#cb44-17" tabindex="-1"></a>dnames <span class="ot">=</span> <span class="fu">c</span>( <span class="st">&quot;riagendr&quot;</span>, <span class="st">&quot;ridageyr&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;dmdeduc2&quot;</span>, <span class="st">&quot;INDFMPIR&quot;</span>)</span>
<span id="cb44-18"><a href="#cb44-18" tabindex="-1"></a>simdf2[,dnames]<span class="ot">=</span>fdata[mycc,dnames]</span>
<span id="cb44-19"><a href="#cb44-19" tabindex="-1"></a>simdf2[,cognames]<span class="ot">=</span>fdata[mycc,cognames]</span>
<span id="cb44-20"><a href="#cb44-20" tabindex="-1"></a><span class="cf">for</span> ( kk <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(cognames)) {</span>
<span id="cb44-21"><a href="#cb44-21" tabindex="-1"></a>  myform <span class="ot">=</span> <span class="fu">paste0</span>( cognames[kk],<span class="st">&quot; ~ riagendr + ridageyr + race + dmdeduc2 + INDFMPIR + &quot;</span>,<span class="fu">paste0</span>( <span class="fu">colnames</span>(simdf), <span class="at">collapse=</span><span class="st">&#39;+&#39;</span>))</span>
<span id="cb44-22"><a href="#cb44-22" tabindex="-1"></a>  mdl <span class="ot">=</span> <span class="fu">lm</span>( myform, <span class="at">data=</span>simdf2 )</span>
<span id="cb44-23"><a href="#cb44-23" tabindex="-1"></a>  <span class="fu">print</span>( <span class="fu">summary</span>( mdl ) )</span>
<span id="cb44-24"><a href="#cb44-24" tabindex="-1"></a>  <span class="fu">print</span>( cognames[kk])</span>
<span id="cb44-25"><a href="#cb44-25" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="dv">3</span>)</span>
<span id="cb44-26"><a href="#cb44-26" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = myform, data = simdf2)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -2.56958 -0.52930  0.03706  0.58419  2.14887 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)    2.228e+00  4.639e-01   4.802 1.85e-06 ***
## riagendr2      4.615e-01  5.920e-02   7.795 1.87e-14 ***
## ridageyr      -4.075e-02  4.598e-03  -8.862  &lt; 2e-16 ***
## race2         -1.604e-02  7.575e-02  -0.212   0.8324    
## race3          1.289e-01  8.325e-02   1.548   0.1220    
## race4          4.692e-03  1.085e-01   0.043   0.9655    
## dmdeduc2       1.583e-01  2.682e-02   5.902 5.18e-09 ***
## INDFMPIR       2.807e-02  2.023e-02   1.388   0.1656    
## diet1          4.655e+01  2.011e+01   2.315   0.0208 *  
## diet2         -2.396e+01  8.163e+01  -0.293   0.7692    
## exposures1     3.880e+03  1.785e+03   2.173   0.0300 *  
## exposures2     8.053e+03  1.871e+04   0.430   0.6671    
## mentalhealth1 -2.969e+04  2.896e+04  -1.025   0.3055    
## mentalhealth2 -1.251e+04  7.660e+03  -1.634   0.1027    
## physical1      6.842e+03  3.608e+03   1.896   0.0583 .  
## physical2     -5.154e+03  2.097e+03  -2.458   0.0142 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.8131 on 853 degrees of freedom
##   (12 observations deleted due to missingness)
## Multiple R-squared:  0.2479, Adjusted R-squared:  0.2347 
## F-statistic: 18.74 on 15 and 853 DF,  p-value: &lt; 2.2e-16
## 
## [1] &quot;z_cerad_re&quot;
## 
## Call:
## lm(formula = myform, data = simdf2)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -2.83169 -0.60865 -0.06156  0.56006  3.04044 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)    1.873e+00  5.264e-01   3.558 0.000395 ***
## riagendr2     -3.929e-02  6.681e-02  -0.588 0.556619    
## ridageyr      -3.902e-02  5.209e-03  -7.491 1.73e-13 ***
## race2         -9.260e-02  8.577e-02  -1.080 0.280633    
## race3         -1.930e-02  9.367e-02  -0.206 0.836827    
## race4         -1.427e-01  1.234e-01  -1.157 0.247735    
## dmdeduc2       1.955e-01  3.034e-02   6.444 1.95e-10 ***
## INDFMPIR       6.588e-02  2.290e-02   2.876 0.004125 ** 
## diet1          2.916e+01  2.271e+01   1.284 0.199490    
## diet2          6.591e+01  9.173e+01   0.719 0.472609    
## exposures1     2.417e+03  2.024e+03   1.194 0.232723    
## exposures2    -1.002e+04  2.110e+04  -0.475 0.635077    
## mentalhealth1 -5.316e+04  3.286e+04  -1.618 0.106122    
## mentalhealth2 -2.168e+04  8.687e+03  -2.496 0.012748 *  
## physical1     -1.639e+03  4.091e+03  -0.401 0.688777    
## physical2      4.514e+02  2.373e+03   0.190 0.849160    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.9129 on 845 degrees of freedom
##   (20 observations deleted due to missingness)
## Multiple R-squared:  0.2026, Adjusted R-squared:  0.1885 
## F-statistic: 14.32 on 15 and 845 DF,  p-value: &lt; 2.2e-16
## 
## [1] &quot;z_animal_re&quot;
## 
## Call:
## lm(formula = myform, data = simdf2)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.2477 -0.5369  0.0698  0.6012  1.9622 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)    2.574e+00  4.920e-01   5.232 2.11e-07 ***
## riagendr2      3.796e-01  6.277e-02   6.047 2.20e-09 ***
## ridageyr      -4.161e-02  4.871e-03  -8.543  &lt; 2e-16 ***
## race2         -2.120e-02  8.027e-02  -0.264   0.7918    
## race3         -2.128e-02  8.831e-02  -0.241   0.8096    
## race4         -1.537e-01  1.151e-01  -1.335   0.1821    
## dmdeduc2       1.238e-01  2.840e-02   4.360 1.46e-05 ***
## INDFMPIR       1.055e-02  2.145e-02   0.492   0.6231    
## diet1          3.153e+01  2.133e+01   1.478   0.1397    
## diet2         -2.412e+01  8.658e+01  -0.279   0.7806    
## exposures1     3.075e+03  1.894e+03   1.624   0.1048    
## exposures2     8.250e+03  1.985e+04   0.416   0.6777    
## mentalhealth1 -2.051e+04  3.070e+04  -0.668   0.5043    
## mentalhealth2 -1.155e+04  8.125e+03  -1.422   0.1554    
## physical1      7.096e+03  3.822e+03   1.856   0.0637 .  
## physical2     -5.049e+03  2.219e+03  -2.275   0.0232 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.8625 on 854 degrees of freedom
##   (11 observations deleted due to missingness)
## Multiple R-squared:  0.186,  Adjusted R-squared:  0.1717 
## F-statistic: 13.01 on 15 and 854 DF,  p-value: &lt; 2.2e-16
## 
## [1] &quot;z_delayed_re&quot;
## 
## Call:
## lm(formula = myform, data = simdf2)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.0114 -1.2211  0.0656  1.2035  6.0369 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)    6.104e+00  1.050e+00   5.815 8.63e-09 ***
## riagendr2      7.871e-01  1.334e-01   5.901 5.25e-09 ***
## ridageyr      -1.272e-01  1.040e-02 -12.235  &lt; 2e-16 ***
## race2         -5.446e-02  1.711e-01  -0.318  0.75030    
## race3          2.892e-01  1.867e-01   1.549  0.12167    
## race4         -1.331e-01  2.474e-01  -0.538  0.59086    
## dmdeduc2       6.144e-01  6.056e-02  10.146  &lt; 2e-16 ***
## INDFMPIR       2.286e-01  4.567e-02   5.004 6.83e-07 ***
## diet1          9.490e+01  4.528e+01   2.096  0.03639 *  
## diet2          8.645e+01  1.828e+02   0.473  0.63648    
## exposures1     1.237e+04  4.033e+03   3.067  0.00223 ** 
## exposures2    -1.909e+03  4.209e+04  -0.045  0.96383    
## mentalhealth1 -1.078e+05  6.552e+04  -1.646  0.10020    
## mentalhealth2 -5.060e+04  1.730e+04  -2.924  0.00355 ** 
## physical1      8.271e+03  8.164e+03   1.013  0.31126    
## physical2     -8.025e+03  4.741e+03  -1.693  0.09084 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.818 on 841 degrees of freedom
##   (24 observations deleted due to missingness)
## Multiple R-squared:  0.4085, Adjusted R-squared:  0.3979 
## F-statistic: 38.72 on 15 and 841 DF,  p-value: &lt; 2.2e-16
## 
## [1] &quot;z_global_re&quot;
## 
## Call:
## lm(formula = myform, data = simdf2)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -2.32590 -0.48894 -0.00093  0.47193  2.83137 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)    1.898e+00  4.271e-01   4.444 9.99e-06 ***
## riagendr2      3.848e-01  5.429e-02   7.087 2.84e-12 ***
## ridageyr      -4.870e-02  4.238e-03 -11.493  &lt; 2e-16 ***
## race2          5.410e-02  6.980e-02   0.775 0.438547    
## race3          1.880e-01  7.674e-02   2.450 0.014488 *  
## race4         -3.616e-02  9.914e-02  -0.365 0.715385    
## dmdeduc2       2.737e-01  2.462e-02  11.117  &lt; 2e-16 ***
## INDFMPIR       1.332e-01  1.867e-02   7.136 2.03e-12 ***
## diet1          2.187e+01  1.854e+01   1.180 0.238462    
## diet2          7.290e+01  7.522e+01   0.969 0.332784    
## exposures1     6.212e+03  1.647e+03   3.771 0.000174 ***
## exposures2    -2.762e+03  1.727e+04  -0.160 0.872959    
## mentalhealth1 -1.932e+04  2.669e+04  -0.724 0.469455    
## mentalhealth2 -1.847e+04  7.067e+03  -2.614 0.009100 ** 
## physical1      3.510e+03  3.301e+03   1.063 0.287915    
## physical2     -3.326e+03  1.915e+03  -1.737 0.082674 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.7529 on 865 degrees of freedom
## Multiple R-squared:  0.439,  Adjusted R-squared:  0.4293 
## F-statistic: 45.12 on 15 and 865 DF,  p-value: &lt; 2.2e-16
## 
## [1] &quot;z_digit_re&quot;</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="do">#######################</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a><span class="cf">for</span> ( k <span class="cf">in</span> knm ) {</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a>  <span class="fu">print</span>(k)</span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>  <span class="fu">print</span>( <span class="fu">interpret_simlr_vector2</span>( resultNH<span class="sc">$</span>v[[k]], <span class="dv">1</span>, <span class="at">n2show=</span><span class="dv">3</span>, <span class="at">shortnames=</span>F ) )</span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a>  <span class="fu">print</span>( <span class="fu">interpret_simlr_vector2</span>( resultNH<span class="sc">$</span>v[[k]], <span class="dv">2</span>, <span class="at">n2show=</span><span class="dv">3</span>, <span class="at">shortnames=</span>F ) )</span>
<span id="cb46-6"><a href="#cb46-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;demog&quot;
##  INDFMPIR  dmdeduc2 
## 1.0000000 0.6039152 
## riagendr_1   dmdeduc2 
##  1.0000000  0.4111688 
## [1] &quot;diet&quot;
##  DR1TNIAC  DR1TKCAL  DR1TPROT 
## 1.0000000 0.9809316 0.5384864 
##  DR1TP204  DR1TCHOL   DR1TCHL 
## 1.0000000 0.9444637 0.6034679 
## [1] &quot;exposures&quot;
##    LBXBCD    LBXBSE 
## 1.0000000 0.4908367 
##    LBXBGE    LBXBGM 
## 1.0000000 0.1715886 
## [1] &quot;mentalhealth&quot;
##     DPQ040     DPQ070     SLQ050 
## 1.00000000 0.07697641 0.04388694 
##    DPQ010    DPQ050    SLQ050 
## 1.0000000 0.1371333 0.1258446 
## [1] &quot;physical&quot;
## BPXPULS_Regular          BPXSY3          BPXSY2 
##       1.0000000       0.5427649       0.4852574 
##    BPXML1    BPXSY2    BPXSY3 
## 1.0000000 0.2912660 0.2911761</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="do">##########################################################################################</span></span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a><span class="co"># https://wwwn.cdc.gov/nchs/nhanes/search/default.aspx</span></span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a><span class="co"># &gt; interpret_simlr_vector2( resultNH$v[[&#39;exposures&#39;]], 1, n2show=5, shortnames=F )</span></span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a><span class="co">#   LBXVBZ    LBXVOX    LBXVFN    LBX2DF </span></span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a><span class="co"># benzene, Xylene, furan, Dimethylfuran</span></span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a><span class="co"># 1.0000000 0.3346728 0.1868323 0.0586727 </span></span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a><span class="do">##########################################################################################</span></span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a><span class="do">###</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Brian Avants.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>
